-- Generated by Oracle SQL Developer Data Modeler 4.0.2.840
--   at:        2014-07-25 15:45:19 CEST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g




CREATE
  TABLE BLOCK
  (
    ID          INTEGER(4) NOT NULL ,
    NAME        VARCHAR (40) NOT NULL ,
    DESCRIPTION VARCHAR(200)
  ) ;
ALTER TABLE BLOCK ADD CONSTRAINT BLOCK_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE BLOCK_CONTENT
  (
    ID INTEGER(4) NOT NULL ,
    CONTENT LONGTEXT NOT NULL
  ) ;
ALTER TABLE BLOCK_CONTENT ADD CONSTRAINT BLOCK_CONTENT_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE BLOCK_FUNCTIONALITY
  (
    ID INTEGER(4) NOT NULL ,
    CODE LONGTEXT NOT NULL
  ) ;
ALTER TABLE BLOCK_FUNCTIONALITY ADD CONSTRAINT BLOCK_FUNCTIONALITY_PK PRIMARY
KEY ( ID ) ;

CREATE
  TABLE BLOCK_LANG
  (
    BLOCK_ID    INTEGER(4) NOT NULL ,
    LANGUAGE_ID INTEGER(4) NOT NULL
  ) ;

CREATE
  TABLE FUNCT_PLUGIN
  (
    PLUGIN_ID              INTEGER(4) NOT NULL ,
    BLOCK_FUNCTIONALITY_ID INTEGER(4) NOT NULL
  ) ;

CREATE
  TABLE FUNCT_STRING
  (
    ID                     INTEGER(4) NOT NULL,
    STRING_KEY             VARCHAR(40) NOT NULL ,
    STRING_VALUE           VARCHAR(250) NOT NULL ,
    BLOCK_FUNCTIONALITY_ID INTEGER(4) NOT NULL ,
    LANGUAGE_ID            INTEGER(4) NOT NULL
  ) ;
ALTER TABLE FUNCT_STRING ADD CONSTRAINT FUNCT_STRING_PK PRIMARY KEY ( ID ) ;
ALTER TABLE FUNCT_STRING ADD CONSTRAINT FUNCT_STRING__UN UNIQUE ( STRING_KEY ) ;

CREATE
  TABLE GROUPS
  (
    ID          INTEGER(4) NOT NULL ,
    NAME        VARCHAR(40) NOT NULL ,
    DESCRIPTION VARCHAR(250)
  ) ;
ALTER TABLE GROUPS ADD CONSTRAINT GROUP_PK PRIMARY KEY ( ID ) ;
ALTER TABLE GROUPS ADD CONSTRAINT GROUP__UN UNIQUE ( NAME ) ;

CREATE
  TABLE LANGUAGES
  (
    ID           INTEGER(4) NOT NULL ,
    DESCRIPTION  VARCHAR(50) NOT NULL ,
    FLAG_IMG_URL VARCHAR (400) NOT NULL ,
    MENU_ID      INTEGER(4) NOT NULL
  ) ;
ALTER TABLE LANGUAGES ADD CONSTRAINT LANGUAGES_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE MENU
  (
    ID          INTEGER(4) NOT NULL ,
    NAME        VARCHAR (40) NOT NULL ,
    DESCRIPTION VARCHAR(250)
  ) ;
ALTER TABLE MENU ADD CONSTRAINT MENU_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE MENU_ITEM
  (
    ID           INTEGER(4) NOT NULL ,
    LABEL        VARCHAR (30) NOT NULL ,
    URL          VARCHAR (400) NOT NULL ,
    POSITION      TINYINT  NOT NULL ,
    HIDDEN       INTEGER(1) NOT NULL ,
    MENU_ID      INTEGER(4) NOT NULL ,
    MENU_ITEM_ID INTEGER(4) ,
    PAGE_ID      INTEGER(4) NOT NULL
  ) ;
ALTER TABLE MENU_ITEM ADD CONSTRAINT MENU_ITEM_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE PAGE
  (
    ID          INTEGER(4) NOT NULL ,
    NAME        VARCHAR (40) NOT NULL ,
    TITLE       VARCHAR (100),
    PUBLISHED   INTEGER(1) NOT NULL ,
    LANGUAGE_ID INTEGER(4) NOT NULL
  ) ;
ALTER TABLE PAGE ADD CONSTRAINT PAGE_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE PAGE_BLOCK
  (
    POSITION  TINYINT  NOT NULL ,
    BLOCK_ID INTEGER(4) NOT NULL ,
    PAGE_ID  INTEGER(4) NOT NULL
  ) ;

CREATE
  TABLE PAGE_PLUGIN
  (
    PAGE_ID   INTEGER(4) NOT NULL ,
    PLUGIN_ID INTEGER(4) NOT NULL
  ) ;

CREATE
  TABLE PAG_GRP
  (
    GROUPS_ID INTEGER(4) NOT NULL ,
    PAGE_ID  INTEGER(4) NOT NULL
  ) ;

CREATE
  TABLE PLUGIN
  (
    ID          INTEGER(4) NOT NULL ,
    NAME        VARCHAR(40) NOT NULL ,
    DESCRIPTION VARCHAR(250)
  ) ;
ALTER TABLE PLUGIN ADD CONSTRAINT PLUGIN_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE PLUGIN_FILE
  (
    ID        INTEGER(4) NOT NULL ,
    URL       VARCHAR (400) NOT NULL ,
    FILE_TYPE INTEGER(1) NOT NULL ,
    PLUGIN_ID INTEGER(4) NOT NULL
  ) ;
ALTER TABLE PLUGIN_FILE ADD CONSTRAINT PLUGIN_FILE_PK PRIMARY KEY ( ID ) ;

CREATE
  TABLE SETTINGS
  (
    ID    INTEGER(4) NOT NULL,
    SET_KEY   VARCHAR (20) NOT NULL ,
    SET_VALUE VARCHAR (400) NOT NULL
  ) ;
ALTER TABLE SETTINGS ADD CONSTRAINT SETTINGS_PK PRIMARY KEY ( ID ) ;
ALTER TABLE SETTINGS ADD CONSTRAINT SETTINGS__UN UNIQUE ( SET_KEY ) ;

CREATE
  TABLE URL
  (
    ID      INTEGER(4) NOT NULL ,
    URL     VARCHAR (400) NOT NULL ,
    PAGE_ID INTEGER(4) NOT NULL
  ) ;
ALTER TABLE URL ADD CONSTRAINT URL_PK PRIMARY KEY ( ID ) ;
ALTER TABLE URL ADD CONSTRAINT URL__UN UNIQUE ( URL ) ;

CREATE
  TABLE USERS
  (
    ID       INTEGER(4) NOT NULL ,
    EMAIL    VARCHAR (30) NOT NULL ,
    PASSWORD VARCHAR (30) NOT NULL ,
    NAME     VARCHAR (30) NOT NULL ,
    SURNAME  VARCHAR (30) ,
    PHONE    VARCHAR (20) ,
    ADDRESS  VARCHAR (50) ,
    CAP      VARCHAR (5) ,
    CITY     VARCHAR (50) ,
    PROVINCE VARCHAR (2) ,
    COUNTRY  VARCHAR (3)
  ) ;
ALTER TABLE USERS ADD CONSTRAINT USERS_PK PRIMARY KEY ( ID ) ;
ALTER TABLE USERS ADD CONSTRAINT USERS__UN UNIQUE ( EMAIL ) ;

CREATE
  TABLE USERS_GROUPS
  (
    GROUPS_ID INTEGER(4) NOT NULL ,
    USERS_ID  INTEGER(4) NOT NULL
  ) ;

ALTER TABLE BLOCK_LANG ADD CONSTRAINT BLOCK_LANG_BLOCK_FK FOREIGN KEY (
BLOCK_ID ) REFERENCES BLOCK ( ID ) ON
DELETE CASCADE ;

ALTER TABLE BLOCK_LANG ADD CONSTRAINT BLOCK_LANG_LANGUAGE_FK FOREIGN KEY (
LANGUAGE_ID ) REFERENCES LANGUAGES ( ID ) ON
DELETE CASCADE ;

ALTER TABLE BLOCK_CONTENT ADD CONSTRAINT FK_ASS_22 FOREIGN KEY ( ID )
REFERENCES BLOCK ( ID ) ;

ALTER TABLE BLOCK_FUNCTIONALITY ADD CONSTRAINT FK_ASS_23 FOREIGN KEY ( ID )
REFERENCES BLOCK ( ID ) ;

ALTER TABLE FUNCT_PLUGIN ADD CONSTRAINT PLUGIN_FUNCTIONALITY_FK
FOREIGN KEY ( BLOCK_FUNCTIONALITY_ID ) REFERENCES BLOCK_FUNCTIONALITY ( ID ) ON
DELETE CASCADE ;

ALTER TABLE FUNCT_PLUGIN ADD CONSTRAINT FUNCT_PLUGIN_PLUGIN_FK FOREIGN KEY (
PLUGIN_ID ) REFERENCES PLUGIN ( ID ) ;

ALTER TABLE FUNCT_STRING ADD CONSTRAINT STRING_FUNCTIONALITY_FK
FOREIGN KEY ( BLOCK_FUNCTIONALITY_ID ) REFERENCES BLOCK_FUNCTIONALITY ( ID ) ON
DELETE CASCADE ;

ALTER TABLE FUNCT_STRING ADD CONSTRAINT FUNCT_STRING_LANGUAGE_FK FOREIGN KEY (
LANGUAGE_ID ) REFERENCES LANGUAGES ( ID ) ;

ALTER TABLE LANGUAGES ADD CONSTRAINT LANGUAGE_MENU_FK FOREIGN KEY ( MENU_ID )
REFERENCES MENU ( ID ) ;

ALTER TABLE MENU_ITEM ADD CONSTRAINT MENU_ITEM_MENU_FK FOREIGN KEY ( MENU_ID )
REFERENCES MENU ( ID ) ON
DELETE CASCADE ;

ALTER TABLE MENU_ITEM ADD CONSTRAINT MENU_ITEM_PAGE_FK FOREIGN KEY ( PAGE_ID )
REFERENCES PAGE ( ID ) ;

ALTER TABLE PAGE_BLOCK ADD CONSTRAINT PAGE_BLOCK_BLOCK_FK FOREIGN KEY (
BLOCK_ID ) REFERENCES BLOCK ( ID ) ;

ALTER TABLE PAGE_BLOCK ADD CONSTRAINT PAGE_BLOCK_PAGE_FK FOREIGN KEY ( PAGE_ID
) REFERENCES PAGE ( ID ) ON
DELETE CASCADE ;

ALTER TABLE PAGE ADD CONSTRAINT PAGE_PAGE_FK FOREIGN KEY ( LANGUAGE_ID )
REFERENCES LANGUAGES ( ID ) ;

ALTER TABLE PAGE_PLUGIN ADD CONSTRAINT PAGE_PLUGIN_PAGE_FK FOREIGN KEY (
PAGE_ID ) REFERENCES PAGE ( ID ) ;

ALTER TABLE PAGE_PLUGIN ADD CONSTRAINT PAGE_PLUGIN_PLUGIN_FK FOREIGN KEY (
PLUGIN_ID ) REFERENCES PLUGIN ( ID ) ;

ALTER TABLE PAG_GRP ADD CONSTRAINT PAG_GRP_GROUPS_FK FOREIGN KEY ( GROUPS_ID )
REFERENCES GROUPS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE PAG_GRP ADD CONSTRAINT PAG_GRP_PAGE_FK FOREIGN KEY ( PAGE_ID )
REFERENCES PAGE ( ID ) ON
DELETE CASCADE ;

ALTER TABLE MENU_ITEM ADD CONSTRAINT PARENT_FK FOREIGN KEY ( MENU_ITEM_ID )
REFERENCES MENU_ITEM ( ID ) ON
DELETE CASCADE ;

ALTER TABLE PLUGIN_FILE ADD CONSTRAINT PLUGIN_FILE_PLUGIN_FK FOREIGN KEY (
PLUGIN_ID ) REFERENCES PLUGIN ( ID ) ON
DELETE CASCADE ;

ALTER TABLE URL ADD CONSTRAINT URL_PAGE_FK FOREIGN KEY ( PAGE_ID ) REFERENCES
PAGE ( ID ) ON
DELETE CASCADE ;

ALTER TABLE USERS_GROUPS ADD CONSTRAINT USER_GROUP_GROUPS_FK FOREIGN KEY (
GROUPS_ID ) REFERENCES GROUPS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE USERS_GROUPS ADD CONSTRAINT USER_GROUP_USER_FK FOREIGN KEY ( USERS_ID
) REFERENCES USERS ( ID ) ON
DELETE CASCADE ;