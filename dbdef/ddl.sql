CREATE TABLE AccessGroup (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_8161F20B5E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Url (url VARCHAR(255) NOT NULL, page_id INT DEFAULT NULL, INDEX IDX_CC3B034EC4663E4 (page_id), PRIMARY KEY(url)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Block (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description VARCHAR(255) DEFAULT NULL, bgurl VARCHAR(255) DEFAULT NULL, bgred INT DEFAULT NULL, bggreen INT DEFAULT NULL, bgblue INT DEFAULT NULL, bgopacity NUMERIC(3, 2) DEFAULT NULL, bgrepeatx TINYINT(1) DEFAULT NULL, bgrepeaty TINYINT(1) DEFAULT NULL, bgsize VARCHAR(10) DEFAULT NULL, blockStyleClassName VARCHAR(255) NOT NULL, blockType VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_42DAB8265E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Menu (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE User (id INT AUTO_INCREMENT NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, surname VARCHAR(255) NOT NULL, phone VARCHAR(255) NOT NULL, address VARCHAR(255) NOT NULL, cap VARCHAR(5) NOT NULL, city VARCHAR(255) NOT NULL, province VARCHAR(255) NOT NULL, country VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_accessgroup (user_id INT NOT NULL, accessgroup_id INT NOT NULL, INDEX IDX_6F279B4DA76ED395 (user_id), INDEX IDX_6F279B4D4239E22F (accessgroup_id), PRIMARY KEY(user_id, accessgroup_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Page (id INT AUTO_INCREMENT NOT NULL, language_id INT DEFAULT NULL, name VARCHAR(255) NOT NULL, title VARCHAR(255) NOT NULL, published TINYINT(1) NOT NULL, public TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_B438191E5E237E06 (name), INDEX IDX_B438191E82F1BAF4 (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page_accessgroup (page_id INT NOT NULL, accessgroup_id INT NOT NULL, INDEX IDX_D1800CAAC4663E4 (page_id), INDEX IDX_D1800CAA4239E22F (accessgroup_id), PRIMARY KEY(page_id, accessgroup_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE FunctionalityBlock (id INT NOT NULL, blockCode LONGTEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE MenuItem (id INT AUTO_INCREMENT NOT NULL, menu_id INT DEFAULT NULL, parent_id INT DEFAULT NULL, `label` VARCHAR(255) NOT NULL, url VARCHAR(255) NOT NULL, itemOrder INT NOT NULL, hidden TINYINT(1) NOT NULL, INDEX IDX_93953FBECCD7E912 (menu_id), INDEX IDX_93953FBE727ACA70 (parent_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Setting (settingKey VARCHAR(255) NOT NULL, settingValue VARCHAR(255) DEFAULT NULL, PRIMARY KEY(settingKey)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Language (id INT AUTO_INCREMENT NOT NULL, menu_id INT DEFAULT NULL, description VARCHAR(255) NOT NULL, flagImageURL VARCHAR(255) DEFAULT NULL, code VARCHAR(2) NOT NULL, UNIQUE INDEX UNIQ_2DAD13E377153098 (code), UNIQUE INDEX UNIQ_2DAD13E3CCD7E912 (menu_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE ContentBlock (id INT NOT NULL, content LONGTEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE contentblock_language (contentblock_id INT NOT NULL, language_id INT NOT NULL, INDEX IDX_7A2EEB6542ADBAC2 (contentblock_id), INDEX IDX_7A2EEB6582F1BAF4 (language_id), PRIMARY KEY(contentblock_id, language_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE PageBlock (page_id INT NOT NULL, block_id INT NOT NULL, blockOrder INT NOT NULL, INDEX IDX_1ACA5644C4663E4 (page_id), INDEX IDX_1ACA5644E9ED820C (block_id), PRIMARY KEY(page_id, block_id, blockOrder)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE Url ADD CONSTRAINT FK_CC3B034EC4663E4 FOREIGN KEY (page_id) REFERENCES Page (id);
ALTER TABLE user_accessgroup ADD CONSTRAINT FK_6F279B4DA76ED395 FOREIGN KEY (user_id) REFERENCES User (id) ON DELETE CASCADE;
ALTER TABLE user_accessgroup ADD CONSTRAINT FK_6F279B4D4239E22F FOREIGN KEY (accessgroup_id) REFERENCES AccessGroup (id) ON DELETE CASCADE;
ALTER TABLE Page ADD CONSTRAINT FK_B438191E82F1BAF4 FOREIGN KEY (language_id) REFERENCES Language (id);
ALTER TABLE page_accessgroup ADD CONSTRAINT FK_D1800CAAC4663E4 FOREIGN KEY (page_id) REFERENCES Page (id) ON DELETE CASCADE;
ALTER TABLE page_accessgroup ADD CONSTRAINT FK_D1800CAA4239E22F FOREIGN KEY (accessgroup_id) REFERENCES AccessGroup (id) ON DELETE CASCADE;
ALTER TABLE FunctionalityBlock ADD CONSTRAINT FK_D095962ABF396750 FOREIGN KEY (id) REFERENCES Block (id) ON DELETE CASCADE;
ALTER TABLE MenuItem ADD CONSTRAINT FK_93953FBECCD7E912 FOREIGN KEY (menu_id) REFERENCES Menu (id);
ALTER TABLE MenuItem ADD CONSTRAINT FK_93953FBE727ACA70 FOREIGN KEY (parent_id) REFERENCES MenuItem (id);
ALTER TABLE Language ADD CONSTRAINT FK_2DAD13E3CCD7E912 FOREIGN KEY (menu_id) REFERENCES Menu (id);
ALTER TABLE ContentBlock ADD CONSTRAINT FK_CAACFE00BF396750 FOREIGN KEY (id) REFERENCES Block (id) ON DELETE CASCADE;
ALTER TABLE contentblock_language ADD CONSTRAINT FK_7A2EEB6542ADBAC2 FOREIGN KEY (contentblock_id) REFERENCES ContentBlock (id) ON DELETE CASCADE;
ALTER TABLE contentblock_language ADD CONSTRAINT FK_7A2EEB6582F1BAF4 FOREIGN KEY (language_id) REFERENCES Language (id) ON DELETE CASCADE;
ALTER TABLE PageBlock ADD CONSTRAINT FK_1ACA5644C4663E4 FOREIGN KEY (page_id) REFERENCES Page (id);
ALTER TABLE PageBlock ADD CONSTRAINT FK_1ACA5644E9ED820C FOREIGN KEY (block_id) REFERENCES Block (id);
